{"ast":null,"code":"import _classCallCheck from \"/Users/anmolu/GitHub/testing-site/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/anmolu/GitHub/testing-site/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/anmolu/GitHub/testing-site/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/anmolu/GitHub/testing-site/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel'; // Constants for normalizing input delta\n\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40; // Slow down zoom if shift key is held for more precise zooming\n\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput = /*#__PURE__*/function (_Input) {\n  _inherits(WheelInput, _Input);\n\n  var _super = _createSuper(WheelInput);\n\n  function WheelInput(element, callback, options) {\n    var _this;\n\n    _classCallCheck(this, WheelInput);\n\n    _this = _super.call(this, element, callback, options);\n    /* eslint-disable complexity, max-statements */\n\n    _this.handleEvent = function (event) {\n      if (!_this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        // Firefox doubles the values on retina screens...\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        // This one is definitely a mouse wheel event.\n        // Normalize this value to match trackpad.\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      _this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        delta: -value,\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    };\n\n    _this.events = (_this.options.events || []).concat(WHEEL_EVENTS);\n\n    _this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n\n    return _this;\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }]);\n\n  return WheelInput;\n}(Input);\n\nexport { WheelInput as default };","map":{"version":3,"mappings":";;;;AACA,OAAOA,KAAP,MAAkC,SAAlC;AAEA,SAAQC,iBAAR,QAAgC,cAAhC;AACA,SAAQC,MAAR,EAAgBC,SAAhB,EAA2BC,gBAA3B,QAAkD,kBAAlD;AAEA,IAAMC,OAAO,GAAGF,SAAS,CAACG,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAlD;AAEA,IAAOC,YAAP,GAAuBN,iBAAvB,CAAOM,YAAP;AACA,IAAMC,UAAU,GAAG,OAAnB,C,CAEA;;AACA,IAAMC,wBAAwB,GAAG,cAAjC;AACA,IAAMC,oBAAoB,GAAG,EAA7B,C,CACA;;AACA,IAAMC,gBAAgB,GAAG,IAAzB;;IAEqBC,U;;;;;EAGnB,oBACEC,OADF,EAEEC,QAFF,EAGEC,OAHF,EAGuB;IAAA;;IAAA;;IAErB,0BAAMF,OAAN,EAAeC,QAAf,EAAyBC,OAAzB;IAuBF;;IACA,oBAAc,UAACC,KAAD,EAAsB;MAClC,IAAI,CAAC,MAAKD,OAAL,CAAaE,MAAlB,EAA0B;QACxB;MACD;;MAED,IAAIC,KAAK,GAAGF,KAAK,CAACG,MAAlB;;MACA,IAAIjB,MAAM,CAACkB,UAAX,EAAuB;QACrB;QACA,IAAIf,OAAO,IAAIW,KAAK,CAACK,SAAN,KAAoBnB,MAAM,CAACkB,UAAP,CAAkBE,eAArD,EAAsE;UACpEJ,KAAK,IAAIhB,MAAM,CAACqB,gBAAhB;QACD;;QACD,IAAIP,KAAK,CAACK,SAAN,KAAoBnB,MAAM,CAACkB,UAAP,CAAkBI,cAA1C,EAA0D;UACxDN,KAAK,IAAIR,oBAAT;QACD;MACF;;MAED,IAAIQ,KAAK,KAAK,CAAV,IAAeA,KAAK,GAAGT,wBAAR,KAAqC,CAAxD,EAA2D;QACzD;QACA;QACAS,KAAK,GAAGO,IAAI,CAACC,KAAL,CAAWR,KAAK,GAAGT,wBAAnB,CAAR;MACD;;MAED,IAAIO,KAAK,CAACW,QAAN,IAAkBT,KAAtB,EAA6B;QAC3BA,KAAK,GAAGA,KAAK,GAAGP,gBAAhB;MACD;;MAED,MAAKG,QAAL,CAAc;QACZc,IAAI,EAAEpB,UADM;QAEZqB,MAAM,EAAE;UACNC,CAAC,EAAEd,KAAK,CAACe,OADH;UAENC,CAAC,EAAEhB,KAAK,CAACiB;QAFH,CAFI;QAMZC,KAAK,EAAE,CAAChB,KANI;QAOZiB,QAAQ,EAAEnB,KAPE;QAQZoB,WAAW,EAAE,OARD;QASZC,MAAM,EAAErB,KAAK,CAACqB;MATF,CAAd;IAWD,CArCD;;IAtBE,MAAKC,MAAL,GAAc,CAAC,MAAKvB,OAAL,CAAauB,MAAb,IAAuB,EAAxB,EAA4BC,MAA5B,CAAmChC,YAAnC,CAAd;;IAEA,MAAK+B,MAAL,CAAYE,OAAZ,CAAoB,eAAK;MAAA,OACvB3B,OAAO,CAAC4B,gBAAR,CAAyBzB,KAAzB,EAAgC,MAAK0B,WAArC,EAAkDtC,gBAAgB,GAAG;QAACuC,OAAO,EAAE;MAAV,CAAH,GAAsB,KAAxF,CADuB;IAAA,CAAzB;;IANqB;EAStB;;;;WAED,mBAAO;MAAA;;MACL,KAAKL,MAAL,CAAYE,OAAZ,CAAoB,eAAK;QAAA,OAAI,MAAI,CAAC3B,OAAL,CAAa+B,mBAAb,CAAiC5B,KAAjC,EAAwC,MAAI,CAAC0B,WAA7C,CAAJ;MAAA,CAAzB;IACD;IAED;;;;;;;WAIA,yBAAgBG,SAAhB,EAAmCC,OAAnC,EAAmD;MACjD,IAAID,SAAS,KAAKrC,UAAlB,EAA8B;QAC5B,KAAKO,OAAL,CAAaE,MAAb,GAAsB6B,OAAtB;MACD;IACF;;;;EA7BqC9C,K;;SAAnBY,U","names":["Input","INPUT_EVENT_TYPES","window","userAgent","passiveSupported","firefox","indexOf","WHEEL_EVENTS","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","WheelInput","element","callback","options","event","enable","value","deltaY","WheelEvent","deltaMode","DOM_DELTA_PIXEL","devicePixelRatio","DOM_DELTA_LINE","Math","floor","shiftKey","type","center","x","clientX","y","clientY","delta","srcEvent","pointerType","target","events","concat","forEach","addEventListener","handleEvent","passive","removeEventListener","eventType","enabled"],"sourceRoot":"","sources":["../../../src/inputs/wheel-input.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}